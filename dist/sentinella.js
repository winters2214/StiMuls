!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Sentinella=t():e.Sentinella=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=7)}([function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=function(){function e(e,t){var r=this;this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver(function(e){return r.processMutations(e)})}return e.prototype.start=function(){this.started||(this.mutationObserver.observe(this.element,{attributes:!0,childList:!0,subtree:!0}),this.started=!0,this.refresh())},e.prototype.stop=function(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)},e.prototype.refresh=function(){if(this.started){for(var e=new Set(this.matchElementsInTree()),t=0,r=Array.from(this.elements);t<r.length;t++){var n=r[t];e.has(n)||this.removeElement(n)}for(var o=0,s=Array.from(e);o<s.length;o++){var n=s[o];this.addElement(n)}}},e.prototype.processMutations=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];this.processMutation(n)}},e.prototype.processMutation=function(e){"attributes"==e.type?this.processAttributeChange(e.target,e.attributeName):"childList"==e.type&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))},e.prototype.processAttributeChange=function(e,t){var r=e;this.elements.has(r)?this.matchElement(r)?this.delegate.elementAttributeChanged(r,t):this.removeElement(r):this.matchElement(r)&&this.addElement(r)},e.prototype.processRemovedNodes=function(e){for(var t=0,r=Array.from(e);t<r.length;t++){var n=r[t];this.processNode(n,this.removeElement)}},e.prototype.processAddedNodes=function(e){for(var t=0,r=Array.from(e);t<r.length;t++){var n=r[t];this.processNode(n,this.addElement)}},e.prototype.matchElement=function(e){return this.delegate.matchElement(e)},e.prototype.matchElementsInTree=function(e){return void 0===e&&(e=this.element),this.delegate.matchElementsInTree(e)},e.prototype.processNode=function(e,t){var r=this.elementFromNode(e);if(r)for(var n=0,o=this.matchElementsInTree(r);n<o.length;n++){var s=o[n];t.call(this,s)}},e.prototype.elementFromNode=function(e){if(e.nodeType==Node.ELEMENT_NODE)return e},e.prototype.addElement=function(e){this.elements.has(e)||(this.elements.add(e),this.delegate.elementMatched(e))},e.prototype.removeElement=function(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched(e))},e}()},function(e,t,r){"use strict";function n(e,t){return s.call(e,t)}t.a=n;var o=Element.prototype,s=o.matches||o.webkitMatchesSelector||o.msMatchesSelector},function(e,t,r){"use strict";function n(e,t,r){var n;r.has(e)?n=r.get(e):(n=new Set,r.set(e,n)),n.add(t)}function o(e,t,r){var n=r.get(e);n&&n.delete(t)}r.d(t,"a",function(){return s});var s=function(){function e(){this.valuesByKey=new Map,this.keysByValue=new Map}return e.prototype.add=function(e,t){n(e,t,this.valuesByKey),n(t,e,this.keysByValue)},e.prototype.delete=function(e,t){o(e,t,this.valuesByKey),o(t,e,this.keysByValue)},e.prototype.has=function(e,t){var r=this.valuesByKey.get(e);return!!r&&r.has(t)},e.prototype.getKeysForValue=function(e){var t=this.keysByValue.get(e);return t?Array.from(t):[]},e.prototype.getValuesForKey=function(e){var t=this.valuesByKey.get(e);return t?Array.from(t):[]},e.prototype.getValueCountForKey=function(e){var t=this.valuesByKey.get(e);return t?t.size:0},e}()},function(e,t,r){"use strict";var n=r(0);r.d(t,"a",function(){return o});var o=function(){function e(e,t,r){this.attributeName=t,this.delegate=r,this.elementObserver=new n.a(e,this)}return Object.defineProperty(e.prototype,"element",{get:function(){return this.elementObserver.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selector",{get:function(){return"["+this.attributeName+"]"},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.elementObserver.start()},e.prototype.stop=function(){this.elementObserver.stop()},e.prototype.matchElement=function(e){return e.hasAttribute(this.attributeName)},e.prototype.matchElementsInTree=function(e){var t=this.matchElement(e)?[e]:[],r=Array.from(e.querySelectorAll(this.selector));return t.concat(r)},e.prototype.elementMatched=function(e){this.delegate.elementMatchedAttribute(e,this.attributeName)},e.prototype.elementUnmatched=function(e){this.delegate.elementUnmatchedAttribute(e,this.attributeName)},e.prototype.elementAttributeChanged=function(e,t){t==this.attributeName&&this.delegate.elementAttributeValueChanged(e,t)},e}()},function(e,t,r){"use strict";function n(e){for(var t=new Set,r=0,n=e;r<n.length;r++){var o=n[r],s=o.attribute;void 0!=s&&t.add(s)}return t}var o=r(1);r.d(t,"a",function(){return s});var s=function(){function e(e){try{this.source=e,this.tokens=a.readTokens(this.source),this.attributeSet=n(this.tokens)}catch(t){throw new Error("Error in selector '"+e+"': "+t.message)}}return e.get=function(t){var r,n=e.selectors;return t=t.toString().trim(),n.has(t)?r=n.get(t):(r=new e(t),n.set(t,r)),r},Object.defineProperty(e.prototype,"attributes",{get:function(){return Array.from(this.attributeSet)},enumerable:!0,configurable:!0}),e.prototype.matches=function(e){return r.i(o.a)(e,this.source)},e.prototype.toString=function(){return this.source},e}();s.selectors=new Map;var i;!function(e){e[e.TAG=0]="TAG",e[e.ID=1]="ID",e[e.CLASS=2]="CLASS",e[e.ATTR=3]="ATTR"}(i||(i={}));var a=function(){function e(e,t,r,n){this.type=e,this.value=t,this.data=r||"",this.negated=n}return e.readTokens=function(t){var r=e.readToken(t,i.TAG)||e.readToken(t,i.ID)||e.readToken(t,i.CLASS)||e.readToken(t,i.ATTR);if(r){var n=t.slice(r.length);return[r].concat(e.readTokens(n))}if(0==t.length)return[];throw new Error("Invalid or unsupported syntax near '"+t+"'")},e.readToken=function(t,r){var n=e.PATTERNS[r],o=":not("==t.slice(0,5),s=o?5:0,i=t.slice(s).match(n);if(i){var a=i[0],u=i[1];if(o){if(")"==t.charAt(a.length+s))return new e(r,":not("+a+")",u,!0);throw new Error("Expected close-parenthesis after ':not("+a+"'")}return new e(r,a,u,!1)}},Object.defineProperty(e.prototype,"attribute",{get:function(){switch(this.type){case i.ID:return"id";case i.CLASS:return"class";case i.ATTR:return this.data}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this.value.length},enumerable:!0,configurable:!0}),e}();a.PATTERNS=function(){var e="(?:\\\\[0-9a-fA-F]{1,6}(?:\\r\\n|[ \\n\\r\\t\\f])?)|\\\\[^\\n\\r\\f0-9a-fA-F]",t="\\n|\\r\\n|\\r|\\f",r="-?(?:[_a-zA-Z]|(?:[^\\0-\\177])|(?:"+e+"))(?:[_a-zA-Z0-9-]|(?:[^\\0-\\177])|(?:"+e+"))*";return n={},n[i.TAG]=new RegExp("^("+r+")"),n[i.ID]=new RegExp("^#("+r+")"),n[i.CLASS]=new RegExp("^\\.("+r+")"),n[i.ATTR]=new RegExp("^\\[("+r+")(?:(=|~=|\\|=|\\^=|\\$=|\\*=)((?:"+r+')|(?:(?:"(?:[^\\n\\r\\f\\\\"]|\\\\(?:'+t+")|(?:"+e+"))*)|(?:'(?:[^\\n\\r\\f\\\\']|\\\\(?:"+t+")|(?:"+e+"))*))))?\\]"),n;var n}()},function(e,t,r){"use strict";var n=r(0),o=r(2),s=r(1);r.d(t,"a",function(){return i});var i=function(){function e(e,t){this.delegate=t,this.elementObserver=new n.a(e,this),this.selectorSet=new Set,this.elements=new o.a,this.attributes=new o.a}return Object.defineProperty(e.prototype,"started",{get:function(){return this.elementObserver.started},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.elementObserver.start()},e.prototype.stop=function(){this.elementObserver.stop()},e.prototype.refresh=function(){this.elementObserver.refresh()},Object.defineProperty(e.prototype,"element",{get:function(){return this.elementObserver.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectors",{get:function(){return Array.from(this.selectorSet)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"compositeSelector",{get:function(){var e=Array.from(this.selectorSet).join(", ");return 0==e.length?":not(*)":e},enumerable:!0,configurable:!0}),e.prototype.observeSelector=function(e){if(!this.selectorSet.has(e)){this.selectorSet.add(e);for(var t=0,r=e.attributes;t<r.length;t++){var n=r[t];this.attributes.add(e,n)}this.refresh()}},e.prototype.stopObservingSelector=function(e){if(this.selectorSet.has(e)){this.selectorSet.delete(e);for(var t=0,r=e.attributes;t<r.length;t++){var n=r[t];this.attributes.delete(e,n)}this.refresh()}},e.prototype.matchElement=function(e){return r.i(s.a)(e,this.compositeSelector)},e.prototype.matchElementsInTree=function(e){var t=this.matchElement(e)?[e]:[],r=Array.from(e.querySelectorAll(this.compositeSelector));return t.concat(r)},e.prototype.elementMatched=function(e){for(var t=0,r=this.selectors;t<r.length;t++){var n=r[t];this.elements.has(n,e)||n.matches(e)&&this.recordMatch(n,e)}},e.prototype.elementUnmatched=function(e){for(var t=0,r=this.selectors;t<r.length;t++){var n=r[t];this.elements.has(n,e)&&this.recordUnmatch(n,e)}},e.prototype.elementAttributeChanged=function(e,t){for(var r=0,n=this.attributes.getKeysForValue(t);r<n.length;r++){var o=n[r],s=o.matches(e),i=this.elements.has(o,e);s&&!i?this.recordMatch(o,e):i&&!s&&this.recordUnmatch(o,e)}},e.prototype.recordMatch=function(e,t){this.elements.add(e,t),this.delegate.elementMatchedSelector(t,e)},e.prototype.recordUnmatch=function(e,t){this.elements.delete(e,t),this.delegate.elementUnmatchedSelector(t,e)},e}()},function(e,t,r){"use strict";var n=r(0),o=r(2);r.d(t,"a",function(){return s});var s=function(){function e(e,t,r){this.attributeName=t,this.delegate=r,this.elementObserver=new n.a(e,this),this.tokensByElement=new o.a}return Object.defineProperty(e.prototype,"started",{get:function(){return this.elementObserver.started},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.elementObserver.start()},e.prototype.stop=function(){this.elementObserver.stop()},e.prototype.refresh=function(){this.elementObserver.refresh()},Object.defineProperty(e.prototype,"element",{get:function(){return this.elementObserver.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selector",{get:function(){return"["+this.attributeName+"]"},enumerable:!0,configurable:!0}),e.prototype.getElementsMatchingToken=function(e){return this.tokensByElement.getKeysForValue(e)},e.prototype.matchElement=function(e){return e.hasAttribute(this.attributeName)},e.prototype.matchElementsInTree=function(e){var t=this.matchElement(e)?[e]:[],r=Array.from(e.querySelectorAll(this.selector));return t.concat(r)},e.prototype.elementMatched=function(e){for(var t=Array.from(this.readTokenSetForElement(e)),r=0,n=t;r<n.length;r++){var o=n[r];this.addTokenForElement(o,e)}},e.prototype.elementUnmatched=function(e){for(var t=this.getTokensForElement(e),r=0,n=t;r<n.length;r++){var o=n[r];this.removeTokenForElement(o,e)}},e.prototype.elementAttributeChanged=function(e){for(var t=this.readTokenSetForElement(e),r=0,n=Array.from(t);r<n.length;r++){var o=n[r];this.addTokenForElement(o,e)}for(var s=0,i=this.getTokensForElement(e);s<i.length;s++){var o=i[s];t.has(o)||this.removeTokenForElement(o,e)}},e.prototype.addTokenForElement=function(e,t){this.tokensByElement.has(t,e)||(this.tokensByElement.add(t,e),this.delegate.elementMatchedTokenForAttribute(t,e,this.attributeName))},e.prototype.removeTokenForElement=function(e,t){this.tokensByElement.has(t,e)&&(this.tokensByElement.delete(t,e),this.delegate.elementUnmatchedTokenForAttribute(t,e,this.attributeName))},e.prototype.getTokensForElement=function(e){return this.tokensByElement.getValuesForKey(e)},e.prototype.readTokenSetForElement=function(e){for(var t=new Set,r=e.getAttribute(this.attributeName)||"",n=0,o=r.split(/\s+/);n<o.length;n++){var s=o[n];s.length&&t.add(s)}return t},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4);r.d(t,"Selector",function(){return n.a});var o=r(3);r.d(t,"AttributeObserver",function(){return o.a});var s=r(0);r.d(t,"ElementObserver",function(){return s.a});var i=r(5);r.d(t,"SelectorObserver",function(){return i.a});var a=r(6);r.d(t,"TokenListObserver",function(){return a.a})}])});